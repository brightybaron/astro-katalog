---
import { Image } from "astro:assets";
import { slugify } from "@lib/utils";

const { picture, title, urutan, deskripsi, harga } = Astro.props;
const { pathname } = Astro.url;

interface Props {
  picture: any;
  deskripsi: string;
  title: string;
  urutan: number;
  harga: string;
}
---

<div class="relative max-w-xs shadow">
  <div
    class:list={[
      "absolute top-0 right-0 ml-auto sm:w-12 sm:h-12 w-8 h-8 bg-white z-[2]",
      pathname === "/astro-katalog/search" ? "hidden" : "",
    ]}
  >
    <span
      class="w-full h-full flex justify-center items-center text-slate-800 text-base font-bold border-2"
      >{urutan}</span
    >
  </div>
  <div>
    <a
      href={`/astro-katalog/collections/${slugify(title)}`}
      class="aspect-square block overflow-hidden"
    >
      <img
        src={pathname === "/astro-katalog/search" ||
        pathname === "/astro-katalog/collections/*"
          ? picture
          : picture[0]}
        alt={`${title} main`}
        height={400}
        width={400}
        class="aspect-square object-cover w-full h-full"
      />
    </a>
    <div class="p-2">
      <a href={`/astro-katalog/collections/${slugify(title)}`}>
        <h5
          class="mb-2 sm:text-lg text-base font-bold tracking-tight text-slate-600 hover:underline"
        >
          {title}
        </h5>
      </a>
      <div
        class:list={[
          "inline-flex items-center gap-x-1 mb-2 font-bold tracking-tight text-slate-600 after:content-[''] after:block after:border-b-2 after:border-b-slate-300 w-fit sm:text-base text-sm",
          pathname !== "/astro-katalog" ? "" : "hidden",
        ]}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="w-5 h-5"
          ><path
            d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"
          ></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"
          ></circle></svg
        >
        <span class="text-teal-700">
          Rp. {harga}
        </span>
      </div>
      <div>
        <a
          href={`/astro-katalog/collections/${slugify(title)}`}
          class="inline-flex items-center gap-x-1 py-2 text-sm font-medium text-center text-slate-600 rounded-lg focus:ring-4 focus:outline-none focus:ring-blue-300 hover:underline dark:focus:ring-blue-800"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="w-5 h-5"
            ><path d="M17 12H3"></path><path d="m11 18 6-6-6-6"></path><path
              d="M21 5v14"></path></svg
          >
          See more
        </a>
      </div>
    </div>
  </div>
</div>
